{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "main",
            "type": "debugpy",
            "request": "launch",
            "program": "${workspaceFolder}/src/build.py",
            "console": "integratedTerminal",
            "args": [
                "${input:commandLineArgs}"
            ]
        },        
        {
            "name": "Python: Debug Tests",
            "type": "debugpy",
            "request": "launch",
            "program": "${file}",
            //"purpose": ["debug-test"],
            "console": "internalConsole",//"integratedTerminal",
            "justMyCode": false,
            // THIS LINE IS CRITICAL: Forces the debugger to use this specific executable
            "python": "${workspaceFolder}/.venv/bin/python",
            "env": {
                //"DYLD_LIBRARY_PATH": "${workspaceFolder}/.venv/lib",
                //"PYTHONHOME": "${workspaceFolder}/.venv",
                //"DYLD_FALLBACK_LIBRARY_PATH": "${workspaceFolder}/.venv/lib",
                "PYTEST_ADDOPTS": "--no-cov"
            },
            "cwd": "${workspaceFolder}" // Ensure CWD is set correctly
        }
    ],
    "inputs": [
        {
            "id": "commandLineArgs",
            "type": "promptString",
            "description": "Enter command-line arguments for the script",
            "default": ""
        }
    ],
    "command": {
        "pythonArgsParser": {
            "command": "echo ${input:commandLineArgs} | xargs"
        }
    }
}
